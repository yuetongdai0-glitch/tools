# patch-cli



é¡¹ç›®è¡¥ä¸åˆå¹¶å·¥å…·ï¼Œå®ç°å¤šé¡¹ç›®ä»£ç å¤ç”¨å’Œå·®å¼‚åŒ–ç®¡ç†ã€‚

## âœ¨ ç‰¹æ€§

- å®æ—¶åˆå¹¶ `public_src` å’Œ `patch` ç›®å½•åˆ° `src`
- æ™ºèƒ½æ–‡ä»¶ç›‘å¬å’Œå¢é‡æ›´æ–°
- å¤šè¯­è¨€æ–‡ä»¶è‡ªåŠ¨åˆå¹¶
è¿›ç¨‹è‡ªåŠ¨ç®¡ç†
- æ”¯æŒè‡ªå®šä¹‰é’©å­è„šæœ¬

## ğŸ“¦ å®‰è£…

```bash
npm install patch-cli --save-dev
# æˆ–
yarn add patch-cli -D
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºç¡€ä½¿ç”¨
```bash
npx patch-cli --dir <è¡¥ä¸å­ç›®å½•>
```

### å…¸å‹é¡¹ç›®ç»“æ„
```
your-project/
â”œâ”€â”€ public_src/      # å…¬å…±åŸºç¡€ä»£ç 
â”œâ”€â”€ patch/           # é¡¹ç›®å·®å¼‚ä»£ç 
â”‚   â””â”€â”€ projectA/    # é¡¹ç›®Aè¡¥ä¸
â”‚   â””â”€â”€ projectB/    # é¡¹ç›®Bè¡¥ä¸
â””â”€â”€ src/             # ç”Ÿæˆçš„åˆå¹¶ä»£ç  (è‡ªåŠ¨åˆ›å»º)
```

## âš™ï¸ é…ç½®

åˆ›å»º `umi-patch.config.json` æ–‡ä»¶ï¼š

```json
{
  "patchChildDir": "projectA",
  "umiCommand": "max dev",
  "hooks": {
    "preMerge": "npm run build:base",
    "postMerge": "npm run generate-types"
  }
}
```

## ğŸ“Œ å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | ç¼©å†™ | æè¿° |
|------|------|------|
| `--dir` | `-d` | æŒ‡å®šè¡¥ä¸å­ç›®å½• (å¿…éœ€) |
| `--config` | `-c` | æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„ (é»˜è®¤: `patch.config.json`) |
| `--no-watch` |  | ç¦ç”¨æ–‡ä»¶ç›‘å¬æ¨¡å¼ |
| `--verbose` | `-v` | æ˜¾ç¤ºè¯¦ç»†æ—¥å¿— |

## ğŸ”§ é«˜çº§ç”¨æ³•

### å¤šè¯­è¨€åˆå¹¶è§„åˆ™
1. `public_src/locales` ä¸ºåŸºç¡€è¯­è¨€æ–‡ä»¶
2. `patch/<project>/locales` ä¸ºé¡¹ç›®å®šåˆ¶æ–‡ä»¶
3. åˆå¹¶è§„åˆ™ï¼š
    - åŒåæ–‡ä»¶ï¼šæ·±åº¦åˆå¹¶
    - æ–°å¢æ–‡ä»¶ï¼šç›´æ¥å¤åˆ¶

### è‡ªå®šä¹‰æ–‡ä»¶å¤„ç†
åœ¨é…ç½®ä¸­æ‰©å±• `extensions` å­—æ®µï¼š

```json
{
  "extensions": {
    "customMerge": [".config"],
    "ignore": [".tmp"]
  }
}
```



## ğŸ“„ è®¸å¯è¯

MIT Â© å·²è¯»ä¹±å›